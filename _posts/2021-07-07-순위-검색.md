---
title: Coding Test - 순위검색
date: 2021-07-07
categories: codingtest
---

Click [programmers coding test link](https://programmers.co.kr/learn/challenges)

### 문제파악하기
___
#### 요구사항
지원서 정보에서 각 문의조건에 해당하는 사람들의 숫자를 return.

#### 입출력변수
- info    
크기가 1 이상 50,000 이하.  
각 원소의 값은 "개발언어 직군 경력 소울푸드 점수" 형식.

- query    
크기가 1 이상 100,000 이하.  
각 원소의 값은 "개발언어 and 직군 and 경력 and 소울푸드 점수" 형식.  
'-'표시는 해당 조건을 고려 하지 않겠다는 의미.

- result    
크기가 query 배열과 같음.  
각 원소의 값은 각 문의조건에 해당하는 사람들의 숫자. 

- test case data
```
info = ["java backend junior pizza 150","python frontend senior chicken 210","python frontend senior chicken 150","cpp backend senior pizza 260","java backend junior chicken 80","python backend senior chicken 50"]
query = ["java and backend and junior and pizza 100","python and frontend and senior and chicken 200","cpp and - and senior and pizza 250","- and backend and senior and - 150","- and - and - and chicken 100","- and - and - and - 150"]
```

### 1차 시도
___
```python
import pandas as pd
```


```python
# 배열 info를 정보별로 분류해서 list에 할당
infoList = []
for s in info:
    s = s.split()
    score = int(s.pop())
    s.append(score)
    infoList.append(s)
# 분류된 배열 info_list를 DataFrame에 할당
infoData = pd.DataFrame(infoList, columns=["0", "1", "2", "3", "Score"])
# Score columns를 기준 오름차순으로 정렬
infoData = infoData.sort_values(by="Score").reset_index(drop=True)
# score list 생성
scoreList = list(infoData["Score"])
```


```python
infoData
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>python</td>
      <td>backend</td>
      <td>senior</td>
      <td>chicken</td>
      <td>50</td>
    </tr>
    <tr>
      <th>1</th>
      <td>java</td>
      <td>backend</td>
      <td>junior</td>
      <td>chicken</td>
      <td>80</td>
    </tr>
    <tr>
      <th>2</th>
      <td>java</td>
      <td>backend</td>
      <td>junior</td>
      <td>pizza</td>
      <td>150</td>
    </tr>
    <tr>
      <th>3</th>
      <td>python</td>
      <td>frontend</td>
      <td>senior</td>
      <td>chicken</td>
      <td>150</td>
    </tr>
    <tr>
      <th>4</th>
      <td>python</td>
      <td>frontend</td>
      <td>senior</td>
      <td>chicken</td>
      <td>210</td>
    </tr>
    <tr>
      <th>5</th>
      <td>cpp</td>
      <td>backend</td>
      <td>senior</td>
      <td>pizza</td>
      <td>260</td>
    </tr>
  </tbody>
</table>
</div>




```python
scoreList
```




    [50, 80, 150, 150, 210, 260]




```python
# query 배열의 정보를 사용 가능하게 변형하여 queryList에 할당하기
queryList = []
for q in query:
    queries = q.replace("and ", "").split(" ")
    s = ""
    infos = ""
    for i in range(len(queries) - 1):
        if queries[i] == "-":
            continue
        else:
            infos += f'{i}'
            s += queries[i]
    queryList.append([infos, s, int(queries[-1])])
```


```python
queryList
```




    [['0123', 'javabackendjuniorpizza', 100],
     ['0123', 'pythonfrontendseniorchicken', 200],
     ['023', 'cppseniorpizza', 250],
     ['12', 'backendsenior', 150],
     ['3', 'chicken', 100],
     ['', '', 150]]




```python
# queryList 원소를 하나씩 확인해서 조건에 충족하는 사람 수 찾기 
result = []
for q in queryList:
    infos = q[0]
    q_info = q[1]
    q_score = q[2]

    # score 조건 충족하는 info_data의 index 최솟값 찾기
    if q_score <= scoreList[0]:
        init_index = 0
    elif q_score > scoreList[-1]:
        result.append(0)
        continue
    else:    
        init = 0
        end = len(scoreList) - 1
        index = 0
        while True:
            index =  (end + init) // 2
            # score 조건 충족 시 init_index에 index를 할당 하고 break
            if scoreList[index - 1] < q_score <= scoreList[index]:
                init_index = index
                break
            if scoreList[index] < q_score <= scoreList[index + 1]:
                init_index = index + 1
                break
            # score 조건 미충족 시 binary search
            if q_score <= scoreList[index]:
                end = index
            else:
                init = index
                
        # 나머지 조건 충족 여부 판단해서 충족하는 사람 수 찾기 
        if len(infos) == 0:
            n = len(infoData) - init_index
            result.append(n)
        elif len(infos) == 1:
            infoList = list(infoData.loc[init_index:, infos])
            n = infoList.count(q_info)
            result.append(n)
        elif len(infos) == 2:
            infoList = list(infoData.loc[init_index:, infos[0]] + infoData.loc[init_index:, infos[1]])
            n = infoList.count(q_info)
            result.append(n)
        elif len(infos) == 3:
            infoList = list(infoData.loc[init_index:, infos[0]] + infoData.loc[init_index:, infos[1]] + infoData.loc[init_index:, infos[2]])
            n = infoList.count(q_info)
            result.append(n)
        elif len(infos) == 4:
            infoList = list(infoData.loc[init_index:, infos[0]] + infoData.loc[init_index:, infos[1]] + infoData.loc[init_index:, infos[2]] + infoData.loc[init_index:, infos[3]])
            n = infoList.count(q_info)
            result.append(n)
```


```python
result
```




    [1, 1, 1, 1, 2, 4]




#### 결과
